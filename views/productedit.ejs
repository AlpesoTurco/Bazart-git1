<% if(Session) { %>
    <%- include ('barras/top') %>

    <body class="bg-gradient-primary">
        <div class="container">
            <div class="card o-hidden border-0 shadow-lg my-5">
                <div class="card-body p-0">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="p-5">
                                <div class="text-center">
                                    <h1 class="h4 text-gray-900 mb-4">Actualizar Producto</h1>
                                </div>
                                <form class="user" id="productForm" action="/actualizar-producto/<%= producto._id %>" method="post" enctype="multipart/form-data">
                                    <input type="hidden" name="productId" value="<%= producto._id %>">
                                    <div class="form-group">
                                        <input type="text" class="form-control form-control-user" id="productName" name="productName" placeholder="Nombre del Producto" value="<%= producto.productName %>" required>
                                    </div>
                                    <div class="form-group">
                                        <textarea class="form-control form-control-user" id="productDescription" name="productDescription" placeholder="Descripción del Producto" rows="3" required><%= producto.productDescription %></textarea>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-6 mb-3 mb-sm-0">
                                            <input type="number" class="form-control form-control-user" id="productPrice" name="productPrice" placeholder="Precio" value="<%= producto.productPrice %>" required>
                                        </div>
                                        <div class="col-sm-6">
                                            <input type="number" class="form-control form-control-user" id="productStock" name="productStock" placeholder="Cantidad en Stock" value="<%= producto.productStock %>" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <input type="text" class="form-control form-control-user" id="productCategory" name="productCategory" placeholder="Categoría del Producto" value="<%= producto.productCategory %>" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="productImages" class="font-weight-bold text-primary">Actualizar Imágenes</label>
                                        <div class="custom-file">
                                            <input type="file" class="custom-file-input" id="productImages" name="productImages" multiple>
                                            <label class="custom-file-label" for="productImages">
                                                <span class="text-muted">Selecciona nuevas imágenes...</span>
                                            </label>
                                        </div>
                                        <small class="form-text text-muted">Deja en blanco si no deseas cambiar las imágenes.</small>
                                    </div>
                                    <button type="submit" class="btn btn-primary btn-user btn-block">Actualizar Producto</button>
                                    <hr>
                                </form>
                                <div id="carouselExampleFade" class="carousel slide carousel-fade">
                                    <div class="carousel-inner">
                                        <% for (let i = 0; i < producto.productImages.length; i++) { %>
                                            <div class="carousel-item <%= i === 0 ? 'active' : '' %>">
                                            <img src="/<%= producto.productImages[i] %>" class="d-block w-100" alt="Imagen del producto">
                                            </div>
                                        <% } %>
                                    </div>
                                    <button class="carousel-control-prev text-warning" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
                                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                        <span class="visually-hidden">Previous</span>
                                    </button>
                                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
                                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                        <span class="visually-hidden">Next</span>
                                    </button>
                                </div>
                                <div class="text-center mt-3">
                                    <a class="small" href="/">Volver al Inicio</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <%- include ('barras/under') %>
<% } else { %>
    <%- include ('barras/noregistrado') %>
<% } %>
